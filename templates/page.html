{% extends 'default.html' %}
{% block title %}{% parent %} &raquo; {{ title }}{% endblock %}

{% block content %}
{% if experimental %}
<div class='warning notification'>This feature is experimental: expect things to break and documentation to be innacurate and change inadvertantly. Use at your own risks.</div>
{% endif %}
<header class='header'>
  <ul class='tags'>
    {% for tag in tags %}
      <li>{{ tag }}</li>
    {% endfor %}
  </ul>

  <h1>{{ title }} {% if documentation %}
  <a href='{{ documentation }}'><span>Official documentation</span></a>
  {% endif %}</h1>  
</header>

{% if tasks %}
<section class='tasks'>
  <h2 id='tasks'>Commands</h2>
  <dl>
    {% for task in tasks %}
    <dt>
      <code class='terminal'>{{ task.name | safe }}</code>
    </dt>
    <dd>
      {{ task.description | safe }}
      {% if task.options %}
        <h3>Options</h3>
        <dl>
          {% for option in task.options %}
          <dt{% if option.required == true %} class='required'{% endif %}><code><span class='type {{ option.type }}'>{{ option.type }}</span> {% if parent %}{{ parent }}.{% endif %}{{ loop.key }}</code></dt>
          <dd>{{ option.description }}</dd>
          {% endfor %}
        </dl>
      {% endif %}
    </dd>
    {% endfor %}
  </dl>
</section>
{% endif %}

<section class='body'>
  {{ contents | safe }}
</section>

{% if configuration %}
<section class='configuration'>
  <h2 id='configuration'>Variables</h2>
  <table>
    <thead>
      <tr>
        <th>Variable</th>
        <th>Default</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      {% set tree = configuration %}
      {% include "partials/_tree.html" %}
    </tbody>
  </table>
</section>
{% endif %}

{% endblock %}