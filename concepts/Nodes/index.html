<!doctype html>
<html>
<head>
  <meta charset='utf-8'/>
  <title>Nodes | devo.ps Documentation</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>
  
  <!-- Favicons -->
  <link rel='shortcut icon' href='/assets/favicon.ico'>
<link rel='apple-touch-icon' sizes='57x57' href='/assets/favicons/apple-touch-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='114x114' href='/assets/favicons/apple-touch-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='72x72' href='/assets/favicons/apple-touch-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='144x144' href='/assets/favicons/apple-touch-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='60x60' href='/assets/favicons/apple-touch-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='120x120' href='/assets/favicons/apple-touch-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='76x76' href='/assets/favicons/apple-touch-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='152x152' href='/assets/favicons/apple-touch-icon-152x152.png'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-196x196.png' sizes='196x196'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-160x160.png' sizes='160x160'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-96x96.png' sizes='96x96'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-16x16.png' sizes='16x16'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-32x32.png' sizes='32x32'>
<meta name='msapplication-TileColor' content='#da532c'>
<meta name='msapplication-TileImage' content='/assets/favicons/mstile-144x144.png'>
<meta name='msapplication-config' content='/assets/favicons/browserconfig.xml'>

  <!-- CSS -->
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <link href='/assets/styles.css' rel='stylesheet' type='text/css'/>
  <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/styles/github.min.css' rel='stylesheet' type='text/css'/>
</head>
<body>
  <nav id='sidebar'>
    <header class='header'>
      <a href='http://devo.ps'>devo.ps</a> documentation
    </header>
    
    <nav class='body'>
      <h3>Manual</h3>


  

  

  


<a href='/manual/CLI' >CLI</a>

<a href='/manual/Getting-Started' >Getting Started</a>

<a href='/manual/Git' >Git</a>


<h3>Concepts</h3>


  

  

  


<a href='/concepts/Nodes'  class='active'>Nodes</a>

<a href='/concepts/Scripts' >Scripts</a>

<a href='/concepts/Tasks' >Tasks</a>


<h3>Services</h3>


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  


<a href='/services/apache' >Apache</a>

<a href='/services/common' >Common</a>

<a href='/services/couchbase' >CouchBase</a>

<a href='/services/couchdb' >CouchDB</a>

<a href='/services/dart' >Dart</a>

<a href='/services/docker' >Docker</a>

<a href='/services/elasticsearch' >ElasticSearch</a>

<a href='/services/go' >Go</a>

<a href='/services/java' >Java</a>

<a href='/services/memcached' >Memcached</a>

<a href='/services/mongodb' >MongoDB</a>

<a href='/services/mysql' >MySQL</a>

<a href='/services/nginx' >Nginx</a>

<a href='/services/nodejs' >Node.js</a>

<a href='/services/openvpn' >OpenVPN</a>

<a href='/services/php' >PHP</a>

<a href='/services/python' >Python</a>

<a href='/services/rabbitmq' >RabbitMQ</a>

<a href='/services/redis' >Redis</a>

<a href='/services/ruby' >Ruby</a>

<a href='/services/uwsgi' >uWSGI</a>

<a href='/services/vagrant' >Vagrant</a>

<a href='/services/varnish' >Varnish</a>

<a href='/services/xvfb' >Xvfb</a>

<a href='/services/zeromq' >ZeroMQ</a>


<h3>Providers</h3>


  

  

  

  


<a href='/providers/digital_ocean' >Digital Ocean</a>

<a href='/providers/ec2' >Ec2</a>

<a href='/providers/linode' >Linode</a>

<a href='/providers/rackspace' >Rackspace</a>

    </nav>
  </nav>

  <section id='content'>
    
<header class='header'>
  <ul class='tags'>
    
  </ul>

  <h1>Nodes </h1>
  
  
</header>



<section class='body'>
  <h2 id="overview">Overview</h2>
<p>Nodes are the core component of <code>devops</code>, to make it simple, you can consider a <code>node</code> is a server.  </p>
<p>Nodes are described in a yaml format, with 1 node per file. Nodes files must be saved in the <code>nodes</code> folder.</p>
<h2 id="file-format">File format</h2>
<p>A node is described in a YAML file. It <strong>must</strong> be named as the node.id.</p>
<pre><code>shell&gt; cat ./nodes/myserver.yml

---
id: myserver
name: My Awesome Server
type: server
disabled: false

provider:
  type: digitalocean
  size: 66
  location: 3
  image: ubuntu13.10    

services: {}
configuration: {}
</code></pre><h3 id="format-details">Format details</h3>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>id</strong></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td></td>
<td>The ID of the node, it must match the filename</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td></td>
<td>The name of the server, will appear on the web interface</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td><code>string</code></td>
<td><code>true</code></td>
<td></td>
<td>Type of the node, currently only <code>server</code> is supported</td>
</tr>
<tr>
<td><strong>disabled</strong></td>
<td><code>bool</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>Whether or not consider the node as disabled</td>
</tr>
<tr>
<td><strong>provider</strong></td>
<td><code>object</code></td>
<td><code>true</code></td>
<td></td>
<td>The provider&#39;s detail of the node, used on provisioning, see the <a href="/providers">providers references</a> for more details</td>
</tr>
<tr>
<td><strong>services</strong></td>
<td><code>object</code></td>
<td><code>true</code></td>
<td></td>
<td>The services to install on the node, see the References section for the list of supported services</td>
</tr>
<tr>
<td><strong>configuration</strong></td>
<td><code>object</code></td>
<td><code>true</code></td>
<td></td>
<td>The configuration for each of the services defined in the <code>services</code></td>
</tr>
</tbody>
</table>
<h2 id="git-operations">Git operations</h2>
<h3 id="on-push-file-validation">On push - File validation</h3>
<p>On <code>git push</code>, the file will be parsed and validated by the <code>devops</code> platform. If the file is not valid, the push will be rejected. You will need to fix the file before pushing again.</p>
<h3 id="file-creation">File creation</h3>
<p>On commit / push of a new node on git, the node will be provisioned on the provider defined in the file.</p>
<p>It will use the cloud provider API credentials defined in your profile. Obviously any attempt to create a node on an invalid provider or on a provider for which no credentials are found in the profile will fail.</p>
<h3 id="file-delete">File delete</h3>
<p>Removing a node from the repository is interpreted by <code>devops</code> as a request to effectively remove the server. The server will be stopped and destroyed.</p>
<h3 id="file-update">File update</h3>
<p>Adding or removing a service, updating the configuration of a service will lead to a sync of the node. After a few minutes the node will have the services and configuration as described in the <code>yaml</code> file.</p>
<p><strong>Notes</strong>:</p>
<ul>
<li>Modifying the <strong><code>provider</code></strong> information will trigger no change (no resize, no migration to another provider); the provider details is only used on provisioning.</li>
<li>Toggling the <strong><code>disabled</code></strong> attribute between <code>False</code> and <code>True</code> will in practice delete (an existing) / create (a disabled) node. It is a convenient way to keep the node definition in your git repository and use it as a temporary node spawned on demand.</li>
</ul>
<h2 id="users-on-node">Users on node</h2>
<p>Several users are created on the server:</p>
<ul>
<li><code>devops</code>: is used by the devops platform to<ul>
<li>maintain your server in sync with its YAML definition</li>
<li>execute <a href="/manual/Tasks.html">tasks</a></li>
</ul>
</li>
<li><code>{user}</code>: is created for you to get access to the server. <ul>
<li><code>{user}</code> is your username on the devo.ps website. </li>
<li>The SSH public keys defined in your profile have been added to the <code>authorized_keys</code>. </li>
</ul>
</li>
<li><code>{collaborators}</code>: one user per collaborator of your git repository is created on the server; for example if <code>bob</code> and <code>alice</code> are collaborator on your <code>myrepo</code> repository, they will also be able to access the server.</li>
</ul>
<h2 id="access-to-the-node">Access to the node</h2>
<p>The access to the node is provided over SSH. The IP address is available on the web interface on the node details page.</p>
<p>You can access your server with the following command (with <code>{user}</code> being your devops username):</p>
<pre><code>ssh {user}@{ip_address}
</code></pre><p>If you have installed the <a href="/manual/CLI.html">CLI</a>, you can also use the following commands:</p>
<pre><code># From anywhere on your workstation
devops ssh --repo=repo node_id

# From your repo folder (the repo is guessed from there)
devops ssh node_id

# Even simpler if you only have 1 node defined and you are in your repo folder...
devops ssh
</code></pre>
</section>




  </section>

  <!-- JS -->
  <!-- <script src='/assets/scripts.js' type='text/javascript'></script> -->
  <script src='//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  
  
</body>
</html>
